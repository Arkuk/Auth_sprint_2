# Auth_sprint_2
**[Ссылка на репозиторий](https://github.com/Arkuk/Auth_sprint_2)**
## Как запустить проект
**1) Склонировать проект**
```commandline
git clone https://github.com/Arkuk/Auth_sprint_2.git
```
**2) Перейти в папку Auth_sprint_2**
```commandline
cd ./Auth_sprint_2
```
**3) Скопировать env**
```commandline
cp .env.example .env
```
**4)  Запустить Docker**
```docker
docker-compose down
docker compose up -d
```
**После запуска вам будет доступна документация**

**[Ссылка на документацию](http://localhost/api/v1/swagger)**


## Как запустить тесты
**1) Склонировать проект(если не склонирован)**
```commandline
git clone https://github.com/Arkuk/Auth_sprint_2.git
```
**2) Перейти в папку Auth_sprint_2/app/tests/functional/**
```commandline
cd ./Auth_sprint_2/app/tests/functional
```
**3)  Запустить Docker**
```docker
docker-compose down
docker-compose up --build -d
```

# Задачи 7 спринта

## Усовершенствование сервиса

### Проектное задание
Упростите регистрацию и аутентификацию пользователей в Auth-сервисе, добавив вход через социальные сервисы. Список сервисов выбирайте исходя из целевой аудитории онлайн-кинотеатра — подумайте, какими социальными сервисами они пользуются. Например, использовать OAuth от Github — не самая удачная идея. Ваши пользователи не разработчики и вряд ли имеют аккаунт на Github. А вот добавить Twitter, Facebook, VK, Google, Yandex или Mail будет хорошей идеей.

Вам не нужно делать фронтенд в этой задаче и реализовывать собственный сервер OAuth. Нужно реализовать протокол со стороны потребителя.

Информация по OAuth у разных поставщиков данных:

Twitter,

Facebook,

VK,

Google,

Yandex,

Mail.
## Интеграция

## Микросервисы должны знать, что ожидать друг от друга

### Задание
Подготовьте Auth сервис к интеграции с другими сервисами вашего сайта. Сгенерируйте схему взаимодействия с Auth сервисом в формате, который используется в вашем сервисе.

## Зависимости сервисов
### Задание

Создайте интеграцию Auth-сервиса и AsyncAPI-сервиса, используя контракт, который вы сделали в прошлом задании.

При создании интеграции не забудьте учесть изящную деградацию Auth-сервиса. Как вы уже выяснили ранее, Auth сервис один из самых нагруженных, потому что в него ходят большинство сервисов сайта. И если он откажет, сайт отказать не должен. Обязательно учтите этот сценарий в интеграциях с Auth-сервисом.

## Распределённая трассировка

### Задание
Добавьте в Auth трасировку и подключите к Jaeger. Для этого вам нужно добавить работу с заголовком x-request-id и отправку трасировок в Jaeger.

## Ограничение количества запросов к серверу (Rate limit)
### Задание
Сейчас сервис Auth беззащитен перед DDOS-атаками. Чтобы сберечь важный элемент системы от чрезмерной нагрузки, которая может вывести его из строя, реализуйте алгоритм Leaky bucket или Token bucket, используя Redis для синхронизации реплик. Впоследствии вы можете делегировать эту обязанность сторонниму инструменту, например, Cloudflare.

## Партицирование в PostgreSQL
### Задание
Партицируйте таблицу с пользователями. Подумайте, по каким критериям вы бы разделили её. Важно посмотреть на таблицу не только в текущем времени, но и заглядывая в некое будущее, когда в ней будут миллионы записей. Пользователи могут быть из одной страны, но из разных регионов. А еще пользователи могут использовать разные устройства для входа и иметь разные возрастные ограничения.